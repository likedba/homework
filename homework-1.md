# homework-1

выключить auto commit
сделать в первой сессии новую таблицу и наполнить ее данными
create table persons(id serial, first_name text, second_name text);
insert into persons(first_name, second_name) values('ivan', 'ivanov');
insert into persons(first_name, second_name) values('petr', 'petrov');
commit;
посмотреть текущий уровень изоляции: show transaction isolation level
начать новую транзакцию в обоих сессиях с дефолтным (не меняя) уровнем изоляции
в первой сессии добавить новую запись
insert into persons(first_name, second_name) values('sergey', 'sergeev');
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему?

***Во второй сессии не видно изменений по скольку транзакция в первой сессии не была завершена, а уровень изоляции подразумевает чтение только зафиксированных изменений***

завершить первую транзакцию - commit;
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему?

***Запись видна тк в первой сессии транзация была закомичена***

завершите транзакцию во второй сессии
начать новые но уже repeatable read транзакции - set transaction isolation level repeatable read;
в первой сессии добавить новую запись
insert into persons(first_name, second_name) values('sveta', 'svetova');
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему?

***Изменений не видно тк уровень изоляции repeatable read подразумевает работу транзакции со снимком данных. Когда транзакция была начата, изменений еще не было, соответственно работа будет происходить с одним снимком на протяжении всей транзакции, вне зависимости от изменений, совершенных параллельными транзакциями***

завершить первую транзакцию - commit;
сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему?

***Изменений не видно все по той же причине***

завершить вторую транзакцию

сделать select * from persons во второй сессии
видите ли вы новую запись и если да то почему?

***Новая транзакция во второй сессии была начата уже после коммита первой, соответственно в ней видно изменения.***
